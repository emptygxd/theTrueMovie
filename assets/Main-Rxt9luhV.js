import{j as e,L as d,R as m,n as F,r as x,P as N,b as l,c as j,h as o}from"./index-CF9uMXLL.js";import{A as v}from"./useScrollSlider-Dpc17geJ.js";const c=({movies:s,container:i,path:t})=>e.jsxs("div",{className:"main-movie",children:[e.jsxs("div",{className:"main-movie__details",children:[e.jsx("h2",{className:"section-header",children:`Топ 250 ${t==="Сериалы"?"сериалов":"фильмов"}`}),e.jsx(d,{to:`${m.MOVIES}?type=${t}`,children:"Полный список"})]}),e.jsx("div",{className:"main-movie__wrapper",children:e.jsx("div",{className:i,children:s.map((a,r)=>e.jsx(_,{movie:a},r))})}),e.jsx(v,{container:`.${i}`})]}),_=({movie:s})=>{const i=s.name??s.alternativeName??"",t=s.name?s.alternativeName:null,a=`${t??""}${t&&s.year?", ":""}${s.year??""}`;return e.jsxs(d,{to:`${m.MOVIES}/${s.id}`,className:"main-movie__item",children:[e.jsx("img",{className:"main-movie__poster",loading:"lazy",src:s.poster.url||F,alt:"poster"}),e.jsxs("div",{className:"main-movie__info",children:[e.jsx("h3",{className:"main-movie__name",title:i,children:i}),a&&e.jsx("h4",{className:"main-movie__description",title:a,children:a})]})]})},f=()=>{x.useEffect(()=>{document.title=N.MAIN},[]);const{isLoading:s,isError:i,data:t}=l({queryKey:["mainMovie"],queryFn:()=>o.get("/movie?page=1&isSeries=false&limit=25&selectFields=id&selectFields=name&selectFields=alternativeName&selectFields=movieLength&selectFields=poster&selectFields=rating&selectFields=year&selectFields=genres&notNullFields=top250&sortField=top250&sortType=1&lists=top250"),select:n=>n.data.docs,refetchOnWindowFocus:!1}),a=t,{isLoading:r,isError:p,data:u}=l({queryKey:["mainSeries"],queryFn:()=>o.get("/movie?page=1&isSeries=true&limit=25&selectFields=id&selectFields=name&selectFields=alternativeName&selectFields=movieLength&selectFields=poster&selectFields=rating&selectFields=year&selectFields=genres&notNullFields=top250&sortField=top250&sortType=1&lists=series-top250"),select:n=>n.data.docs,refetchOnWindowFocus:!1}),h=u;return s||r?e.jsx(j,{}):i||p?e.jsx("section",{children:"ошибка"}):e.jsx("section",{className:"main",children:e.jsxs("div",{className:"main__container",children:[e.jsx(c,{movies:a,container:"main-movie__container",path:"Фильмы"}),e.jsx(c,{movies:h,container:"main-series__container",path:"Сериалы"})]})})};export{f as default};
