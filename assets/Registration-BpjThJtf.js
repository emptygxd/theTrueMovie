import{j as s,u as b,a as y,b as R,r as x,P as F,R as c,c as H,L as I,d as A}from"./index-Bls0foRN.js";import{u as h,S as l,a as f}from"./StyledInput-RMRrcq5A.js";import{S as T}from"./StyledButton-D7Ja3p_W.js";const O=({name:r,placeholder:t})=>s.jsxs("div",{className:"file__container",children:[s.jsx("p",{children:"Фотография"}),s.jsx("input",{className:"file__input",type:"file",name:r,accept:"image/jpeg, image/png",id:"file"}),s.jsx("label",{htmlFor:"file"}),s.jsx("label",{className:"file__text",htmlFor:"file",children:t})]}),B=()=>{const r=b(),t=y(R);x.useEffect(()=>{document.title=F.REGISTRATION,t.name&&r(c.BASE)},[t]);const{isHidden:d,showPassword:u}=h(),{isHidden:m,showPassword:j}=h(),[i,w]=x.useState({name:"",email:"",password:"",confirmPassword:""}),_=/^[^\s]{1,20}$/,g=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,N=/^[A-Za-z\d@$!%*?&]{8,30}$/,S=a=>{const e={},o=a.get("name"),n=a.get("email"),p=a.get("password"),E=a.get("confirmPassword");return _.test(o)||(e.name="Имя: до 20 символов, без пробелов"),g.test(n)||(e.email="Неверный email"),N.test(p)||(e.password="Пароль: от 8 до 30 символов"),p!==E&&(e.confirmPassword="Пароли не совпадают"),e},P=H(),v=a=>{a.preventDefault();const e=new FormData(a.currentTarget),o=S(e);if(Object.keys(o).length===0){const n={name:e.get("name"),email:e.get("email"),photo:e.get("uploadFile")};P(A.setUser(n)),localStorage.setItem("user",JSON.stringify(n)),r(c.BASE,{replace:!0})}else w(o)};return s.jsx("section",{className:"form__container",children:s.jsxs("form",{onSubmit:v,className:"form",children:[s.jsx("h2",{children:"Регистрация"}),s.jsxs("div",{className:"registration__container",children:[s.jsxs("div",{className:"form__left",children:[s.jsxs("div",{className:"form__unit",children:[s.jsx(l,{type:"text",name:"name",placeholder:"Имя пользователя"}),s.jsx("p",{className:"error",children:i.name})]}),s.jsxs("div",{className:"form__unit",children:[s.jsx(l,{type:"mail",name:"email",placeholder:"Электронная почта"}),s.jsx("p",{className:"error",children:i.email})]}),s.jsxs("div",{className:"form__unit",children:[s.jsx(l,{type:d==="hidden"?"password":"text",name:"password",placeholder:"Пароль"}),s.jsx(f,{isHidden:d,callback:u}),s.jsx("p",{className:"error",children:i.password})]}),s.jsxs("div",{className:"form__unit",children:[s.jsx(l,{type:m==="hidden"?"password":"text",name:"confirmPassword",placeholder:"Подтвердите пароль"}),s.jsx(f,{isHidden:m,callback:j}),s.jsx("p",{className:"error",children:i.confirmPassword})]})]}),s.jsx("span",{className:"form__line-between"}),s.jsx("div",{className:"form__right",children:s.jsx(O,{name:"uploadFile",placeholder:"Выберите файл"})})]}),s.jsxs("div",{className:"form__buttons",children:[s.jsx(T,{children:"Подтвердить"}),s.jsxs("p",{children:["Уже есть аккаунт? ",s.jsx(I,{to:c.LOGIN,children:"Войти"})]})]})]})})};export{B as default};
