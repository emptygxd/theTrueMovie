import{j as e,L as d,R as m,n as x,r as N,P as _,a as j,b as v,e as l,f as g,h as o}from"./index-Bls0foRN.js";import{A as y}from"./useScrollSlider-Dq0gEt9Y.js";const c=({movies:s,container:t,path:a})=>e.jsxs("div",{className:"main-movie",children:[e.jsxs("div",{className:"main-movie__details",children:[e.jsx("h2",{className:"section-header",children:`Топ 250 ${a==="Сериалы"?"сериалов":"фильмов"}`}),e.jsx(d,{to:`${m.MOVIES}?type=${a}`,children:"Полный список"})]}),e.jsx("div",{className:"main-movie__wrapper",children:e.jsx("div",{className:t,children:s.map((i,r)=>e.jsx(f,{movie:i},`${i}_${r}`))})}),e.jsx(y,{container:`.${t}`})]}),f=({movie:s})=>{const t=s.name??s.alternativeName??"",a=s.name?s.alternativeName:null,i=`${a??""}${a&&s.year?", ":""}${s.year??""}`;return e.jsxs(d,{to:`${m.MOVIES}/${s.id}`,className:"main-movie__item",children:[e.jsx("img",{className:"main-movie__poster",loading:"lazy",src:s.poster.url||x,alt:"poster"}),e.jsxs("div",{className:"main-movie__info",children:[e.jsx("h3",{className:"main-movie__name",title:t,children:t}),i&&e.jsx("h4",{className:"main-movie__description",title:i,children:i})]})]})},$=()=>{N.useEffect(()=>{document.title=_.MAIN},[]);const s=j(v);console.log(s);const{isLoading:t,isError:a,data:i}=l({queryKey:["mainMovie"],queryFn:()=>o.get("/movie?page=1&isSeries=false&limit=25&selectFields=id&selectFields=name&selectFields=alternativeName&selectFields=movieLength&selectFields=poster&selectFields=rating&selectFields=year&selectFields=genres&notNullFields=top250&sortField=top250&sortType=1&lists=top250"),select:n=>n.data.docs,refetchOnWindowFocus:!1}),r=i,{isLoading:u,isError:p,data:h}=l({queryKey:["mainSeries"],queryFn:()=>o.get("/movie?page=1&isSeries=true&limit=25&selectFields=id&selectFields=name&selectFields=alternativeName&selectFields=movieLength&selectFields=poster&selectFields=rating&selectFields=year&selectFields=genres&notNullFields=top250&sortField=top250&sortType=1&lists=series-top250"),select:n=>n.data.docs,refetchOnWindowFocus:!1}),F=h;return t||u?e.jsx(g,{}):a||p?e.jsx("section",{children:"Error"}):e.jsx("section",{className:"main",children:e.jsxs("div",{className:"main__container",children:[e.jsx(c,{movies:r,container:"main-movie__container",path:"Фильмы"}),e.jsx(c,{movies:F,container:"main-series__container",path:"Сериалы"})]})})};export{$ as default};
